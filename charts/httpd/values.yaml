# vim: set ft=yaml:
# yaml-language-server: $schema=values.schema.json

# Deployed on Openshift?
openshift: true

image:
  # -- Repository for Apache http server
  repository: quay.io/rgordill/httpd-micro
  # -- Tag for Apache http server
  tag: "2.24-1"

# @schema
# required: false
# @schema
# -- The complete prefix for all the objects generated by the chart (optional)
fullnameOverride: {}

# Storage
storage:
  # -- Volume Size
  size: 1Gi
  # -- The RWX-capable StorageClass to provision the volume.
  storageClass: ocs-storagecluster-cephfs

# Internal Service that exposes the server
service:
  # -- Service port number to expose httpd internally
  port: 443

# -- default domain for ingress controller
domain: apps.ocp.sa-iberia.lab.eng.brq2.redhat.com

# CPU and memory resources for the pod
resources: 
  # Requests
  requests:
    # -- CPU requests
    cpu: 1
    # -- Memory requests
    memory: 512Mi
  # Limits
  limits:
    # -- CPU limits
    cpu: 1
    # -- Memory limits
    memory: 512Mi

# -- Number of replicas
replicas: 1

# Ingress to expose the server
ingress:
  # -- Expose http outside the cluster
  enabled: true
  # -- Class of the ingress controller. Currently, only nginx is supported
  classname: nginx
  # -- If custom host is used: mandatory for non openshift deployments
  host: ""

# Repo with the content to serve
git:
  # -- Git URL with content
  url: https://github.com/sclorg/httpd-ex.git
  # -- Git branch with content
  branch: master

# @schema
# required: false
# @schema
# -- Affinity definition
affinity: {}

# Monitoring configuration for prometheus
monitor:
  # -- Monitoring enabled
  enabled: true
  # Image config
  image: 
    # -- Monitoring image
    repository: quay.io/lusitaniae/apache-exporter
    # -- Monitoring tag
    tag: latest

# @schema
# enum: 
# - json
# - combined
# @schema
# -- Logging format
logging: json

# Cert Manager config if used
certManager:
  # -- Enabling cert-manager Certs creation
  enabled: true
  # Issuer Reference
  issuerRef:
    # @schema
    # enum:
    # - Issuer
    # - ClusterIssuer
    # @schema
    # -- Kind of Issuer
    kind: ClusterIssuer
    # -- IssuerName
    name: lab-ca-issuer 

# TODO: extraConfigMaps to inject to http server
# extraConfigMaps: []